<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">Pruning-Guided Bridge Allocation (PGBA)</text>
  
  <!-- Original Network - Left Side -->
  <rect x="50" y="100" width="200" height="400" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="2" />
  <text x="150" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Original Network</text>
  
  <!-- Neurons - Left Side -->
  <circle cx="100" cy="180" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="150" cy="180" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="200" cy="180" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="100" cy="230" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="150" cy="230" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="200" cy="230" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="100" cy="280" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="150" cy="280" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="200" cy="280" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="100" cy="330" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="150" cy="330" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="200" cy="330" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="100" cy="380" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="150" cy="380" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="200" cy="380" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="100" cy="430" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="150" cy="430" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="200" cy="430" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <!-- Neuron Connections -->
  <line x1="100" y1="195" x2="100" y2="215" stroke="#0066cc" stroke-width="1" />
  <line x1="150" y1="195" x2="150" y2="215" stroke="#0066cc" stroke-width="1" />
  <line x1="200" y1="195" x2="200" y2="215" stroke="#0066cc" stroke-width="1" />
  
  <line x1="100" y1="245" x2="100" y2="265" stroke="#0066cc" stroke-width="1" />
  <line x1="150" y1="245" x2="150" y2="265" stroke="#0066cc" stroke-width="1" />
  <line x1="200" y1="245" x2="200" y2="265" stroke="#0066cc" stroke-width="1" />
  
  <line x1="100" y1="295" x2="100" y2="315" stroke="#0066cc" stroke-width="1" />
  <line x1="150" y1="295" x2="150" y2="315" stroke="#0066cc" stroke-width="1" />
  <line x1="200" y1="295" x2="200" y2="315" stroke="#0066cc" stroke-width="1" />
  
  <line x1="100" y1="345" x2="100" y2="365" stroke="#0066cc" stroke-width="1" />
  <line x1="150" y1="345" x2="150" y2="365" stroke="#0066cc" stroke-width="1" />
  <line x1="200" y1="345" x2="200" y2="365" stroke="#0066cc" stroke-width="1" />
  
  <line x1="100" y1="395" x2="100" y2="415" stroke="#0066cc" stroke-width="1" />
  <line x1="150" y1="395" x2="150" y2="415" stroke="#0066cc" stroke-width="1" />
  <line x1="200" y1="395" x2="200" y2="415" stroke="#0066cc" stroke-width="1" />
  
  <!-- Pruning Analysis - Middle -->
  <rect x="300" y="100" width="200" height="400" rx="10" ry="10" fill="#fff2cc" stroke="#ff9900" stroke-width="2" />
  <text x="400" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Pruning Analysis</text>
  
  <!-- Importance Score Heat Map -->
  <rect x="325" y="160" width="150" height="150" fill="#ffffff" stroke="#ff9900" stroke-width="1" />
  <text x="400" y="180" font-family="Arial" font-size="14" text-anchor="middle">Importance Scores</text>
  
  <!-- Heatmap cells -->
  <rect x="350" y="190" width="20" height="20" fill="#ffecb3" stroke="#ff9900" stroke-width="0.5" />
  <rect x="370" y="190" width="20" height="20" fill="#ffecb3" stroke="#ff9900" stroke-width="0.5" />
  <rect x="390" y="190" width="20" height="20" fill="#ffe082" stroke="#ff9900" stroke-width="0.5" />
  <rect x="410" y="190" width="20" height="20" fill="#ffd54f" stroke="#ff9900" stroke-width="0.5" />
  
  <rect x="350" y="210" width="20" height="20" fill="#ffecb3" stroke="#ff9900" stroke-width="0.5" />
  <rect x="370" y="210" width="20" height="20" fill="#ffe082" stroke="#ff9900" stroke-width="0.5" />
  <rect x="390" y="210" width="20" height="20" fill="#ffca28" stroke="#ff9900" stroke-width="0.5" />
  <rect x="410" y="210" width="20" height="20" fill="#ffb300" stroke="#ff9900" stroke-width="0.5" />
  
  <rect x="350" y="230" width="20" height="20" fill="#ffe082" stroke="#ff9900" stroke-width="0.5" />
  <rect x="370" y="230" width="20" height="20" fill="#ffb300" stroke="#ff9900" stroke-width="0.5" />
  <rect x="390" y="230" width="20" height="20" fill="#ff9900" stroke="#b26a00" stroke-width="0.5" />
  <rect x="410" y="230" width="20" height="20" fill="#ff8f00" stroke="#b26a00" stroke-width="0.5" />
  
  <rect x="350" y="250" width="20" height="20" fill="#ffd54f" stroke="#ff9900" stroke-width="0.5" />
  <rect x="370" y="250" width="20" height="20" fill="#ffca28" stroke="#ff9900" stroke-width="0.5" />
  <rect x="390" y="250" width="20" height="20" fill="#ff8f00" stroke="#b26a00" stroke-width="0.5" />
  <rect x="410" y="250" width="20" height="20" fill="#ff6f00" stroke="#b26a00" stroke-width="0.5" />
  
  <!-- Importance Score Formula -->
  <rect x="325" y="320" width="150" height="50" rx="5" ry="5" fill="#fff8e1" stroke="#ff9900" stroke-width="1" />
  <text x="400" y="345" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">S(n_i) = |∂L/∂n_i| · |n_i|</text>
  <text x="400" y="365" font-family="Arial" font-size="12" text-anchor="middle">Importance Scoring</text>
  
  <!-- Low Importance Neurons Identified -->
  <circle cx="350" cy="390" r="15" fill="#ffecb3" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,2" />
  <circle cx="400" cy="390" r="15" fill="#ffecb3" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,2" />
  <circle cx="450" cy="390" r="15" fill="#ffecb3" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,2" />
  
  <text x="400" y="430" font-family="Arial" font-size="14" text-anchor="middle">Low-Impact Neurons</text>
  <text x="400" y="450" font-family="Arial" font-size="14" text-anchor="middle">Identified</text>
  
  <!-- Mask Simulation -->
  <rect x="325" y="470" width="150" height="20" rx="5" ry="5" fill="#fff8e1" stroke="#ff9900" stroke-width="1" />
  <text x="400" y="485" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">H̃^(l) = H^(l) ⊙ (1 - M^(l))</text>
  
  <!-- Bridge Network - Right Side -->
  <rect x="550" y="100" width="200" height="400" rx="10" ry="10" fill="#d1e7dd" stroke="#198754" stroke-width="2" />
  <text x="650" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Bridge Network</text>
  
  <!-- Neurons - Right Side -->
  <circle cx="600" cy="180" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="650" cy="180" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="700" cy="180" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="600" cy="230" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="650" cy="230" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="700" cy="230" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="600" cy="280" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="650" cy="280" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="700" cy="280" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="600" cy="330" r="15" fill="#28a745" stroke="#198754" stroke-width="2" />
  <circle cx="650" cy="330" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="700" cy="330" r="15" fill="#28a745" stroke="#198754" stroke-width="2" />
  
  <circle cx="600" cy="380" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="650" cy="380" r="15" fill="#28a745" stroke="#198754" stroke-width="2" />
  <circle cx="700" cy="380" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <circle cx="600" cy="430" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="650" cy="430" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <circle cx="700" cy="430" r="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  
  <!-- Neuron Connections -->
  <line x1="600" y1="195" x2="600" y2="215" stroke="#0066cc" stroke-width="1" />
  <line x1="650" y1="195" x2="650" y2="215" stroke="#0066cc" stroke-width="1" />
  <line x1="700" y1="195" x2="700" y2="215" stroke="#0066cc" stroke-width="1" />
  
  <line x1="600" y1="245" x2="600" y2="265" stroke="#0066cc" stroke-width="1" />
  <line x1="650" y1="245" x2="650" y2="265" stroke="#0066cc" stroke-width="1" />
  <line x1="700" y1="245" x2="700" y2="265" stroke="#0066cc" stroke-width="1" />
  
  <line x1="600" y1="295" x2="600" y2="315" stroke="#0066cc" stroke-width="1" />
  <line x1="650" y1="295" x2="650" y2="315" stroke="#0066cc" stroke-width="1" />
  <line x1="700" y1="295" x2="700" y2="315" stroke="#0066cc" stroke-width="1" />
  
  <line x1="600" y1="345" x2="600" y2="365" stroke="#0066cc" stroke-width="1" />
  <line x1="650" y1="345" x2="650" y2="365" stroke="#0066cc" stroke-width="1" />
  <line x1="700" y1="345" x2="700" y2="365" stroke="#0066cc" stroke-width="1" />
  
  <line x1="600" y1="395" x2="600" y2="415" stroke="#0066cc" stroke-width="1" />
  <line x1="650" y1="395" x2="650" y2="415" stroke="#0066cc" stroke-width="1" />
  <line x1="700" y1="395" x2="700" y2="415" stroke="#0066cc" stroke-width="1" />
  
  <!-- Bridge Detector Components -->
  <rect x="565" y="300" width="170" height="25" rx="3" ry="3" fill="#28a745" fill-opacity="0.2" stroke="#198754" stroke-width="1" stroke-dasharray="3,1" />
  <text x="650" y="317" font-family="Arial" font-size="10" text-anchor="middle">Bridge Detector</text>
  
  <rect x="565" y="350" width="170" height="25" rx="3" ry="3" fill="#28a745" fill-opacity="0.2" stroke="#198754" stroke-width="1" stroke-dasharray="3,1" />
  <text x="650" y="367" font-family="Arial" font-size="10" text-anchor="middle">Query Encoder</text>
  
  <rect x="565" y="400" width="170" height="25" rx="3" ry="3" fill="#28a745" fill-opacity="0.2" stroke="#198754" stroke-width="1" stroke-dasharray="3,1" />
  <text x="650" y="417" font-family="Arial" font-size="10" text-anchor="middle">Response Integrator</text>
  
  <!-- External Knowledge Service -->
  <rect x="600" y="520" width="100" height="35" rx="5" ry="5" fill="#f8d7da" stroke="#dc3545" stroke-width="1.5" />
  <text x="650" y="542" font-family="Arial" font-size="12" text-anchor="middle">External Knowledge</text>
  
  <!-- Bridge Connection -->
  <line x1="600" y1="330" x2="570" y2="330" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="570" y1="330" x2="570" y2="535" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="570" y1="535" x2="600" y2="535" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  
  <line x1="700" y1="330" x2="730" y2="330" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="730" y1="330" x2="730" y2="535" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="730" y1="535" x2="700" y2="535" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  
  <line x1="650" y1="380" x2="650" y2="520" stroke="#28a745" stroke-width="2" stroke-dasharray="5,3" />
  
  <!-- Process Arrows -->
  <defs>
    <marker id="arrow_orange" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ff9900" />
    </marker>
    <marker id="arrow_green" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#198754" />
    </marker>
  </defs>
  
  <line x1="250" y1="300" x2="300" y2="300" stroke="#ff9900" stroke-width="2" marker-end="url(#arrow_orange)" />
  <line x1="500" y1="300" x2="550" y2="300" stroke="#198754" stroke-width="2" marker-end="url(#arrow_green)" />
  
  <!-- Performance Impact Assessment -->
  <rect x="275" y="570" width="350" height="80" rx="10" ry="10" fill="#e2e3e5" stroke="#6c757d" stroke-width="2" />
  <text x="450" y="595" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Performance Impact Assessment</text>
  <text x="450" y="620" font-family="Arial" font-size="14" text-anchor="middle" font-style="italic">ΔP = P(y|x) - P(y|x, M)</text>
  <text x="450" y="640" font-family="Arial" font-size="14" text-anchor="middle">Repurpose neurons where ΔP &lt; ε</text>
  
  <!-- Process Flow Arrows -->
  <line x1="400" y1="500" x2="400" y2="570" stroke="#6c757d" stroke-width="2" marker-end="url(#arrow_orange)" />
  <line x1="500" y1="610" x2="550" y2="550" stroke="#198754" stroke-width="2" marker-end="url(#arrow_green)" />
  
  <!-- PGBA Workflow Steps -->
  <rect x="780" y="160" width="100" height="300" rx="10" ry="10" fill="#e9ecef" stroke="#6c757d" stroke-width="1.5" />
  <text x="830" y="180" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">PGBA Workflow</text>
  
  <circle cx="800" cy="210" r="10" fill="#0066cc" />
  <text x="815" y="215" font-family="Arial" font-size="12" text-anchor="start">Pre-train</text>
  
  <circle cx="800" cy="250" r="10" fill="#ff9900" />
  <text x="815" y="255" font-family="Arial" font-size="12" text-anchor="start">Prune</text>
  
  <circle cx="800" cy="290" r="10" fill="#198754" />
  <text x="815" y="295" font-family="Arial" font-size="12" text-anchor="start">Replace</text>
  
  <circle cx="800" cy="330" r="10" fill="#dc3545" />
  <text x="815" y="335" font-family="Arial" font-size="12" text-anchor="start">Fine-tune</text>
  
  <circle cx="800" cy="370" r="10" fill="#6f42c1" />
  <text x="815" y="375" font-family="Arial" font-size="12" text-anchor="start">Evaluate</text>
  
  <circle cx="800" cy="410" r="10" fill="#fd7e14" />
  <text x="815" y="415" font-family="Arial" font-size="12" text-anchor="start">Deploy</text>
  
  <line x1="800" y1="220" x2="800" y2="240" stroke="#6c757d" stroke-width="1.5" />
  <line x1="800" y1="260" x2="800" y2="280" stroke="#6c757d" stroke-width="1.5" />
  <line x1="800" y1="300" x2="800" y2="320" stroke="#6c757d" stroke-width="1.5" />
  <line x1="800" y1="340" x2="800" y2="360" stroke="#6c757d" stroke-width="1.5" />
  <line x1="800" y1="380" x2="800" y2="400" stroke="#6c757d" stroke-width="1.5" />
  
  <!-- Legend -->
  <rect x="100" y="630" width="15" height="15" fill="#99ccff" stroke="#0066cc" stroke-width="1" />
  <text x="125" y="642" font-family="Arial" font-size="12" text-anchor="start">Standard Neurons</text>
  
  <rect x="250" y="630" width="15" height="15" fill="#ffecb3" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,2" />
  <text x="275" y="642" font-family="Arial" font-size="12" text-anchor="start">Low-Impact Neurons</text>
  
  <rect x="400" y="630" width="15" height="15" fill="#28a745" stroke="#198754" stroke-width="2" />
  <text x="425" y="642" font-family="Arial" font-size="12" text-anchor="start">Bridge Neurons</text>
  
  <rect x="550" y="630" width="15" height="15" fill="#f8d7da" stroke="#dc3545" stroke-width="1.5" />
  <text x="575" y="642" font-family="Arial" font-size="12" text-anchor="start">External Knowledge</text>
  
  <rect x="700" y="630" width="15" height="15" fill="#e9ecef" stroke="#6c757d" stroke-width="1.5" />
  <text x="725" y="642" font-family="Arial" font-size="12" text-anchor="start">Workflow Steps</text>
</svg>